(function(){"use strict";function t(t,n){var i=arguments.length;return 1==i&&!c(arguments[0])&&a(arguments[0])?(t=arguments[0].x,n=arguments[0].y):2==i&&u(t)&&u(n)||(0==i?(t=h.x,n=h.y):l("arguments error")),this.x=t,this.y=n,this}function n(n,i,e){var o,r=n,s=arguments.length;return a(arguments[0])||l(arguments[0].toString()+"is not a point"),2==s&&a(arguments[1])?o=arguments[1]:3==s&&u(i)&&u(e)?(o=new t,o.x=r.x+i*Math.cos(e),o.y=r.y+i*Math.sin(e)):l("arguments error"),this.pointStart=r,this.pointEnd=o,this}function i(t){return this.canvas=t.canvas,this.context=t,this.point={x:0,y:0},this}var e=this,o=(e.yun,function(t){return this.canvas=t.canvas,this.ctx=t,this}),r=o.types={},s=o.tools={},h=s.point={x:0,y:0},c=s.isNull=function(t){return"undefined"==typeof t||(null==t||"string"==typeof t&&""==t)},u=s.isNumber=function(t){return"number"==typeof t},a=s.isPoint=function(t){return c(t)?(l("the argument is not a point"),!1):!(!u(t.x)||!u(t.y))||(l("the argument is not a point"),!1)},l=s.Error=function(t){throw t},f=(r.Point=function(n,i){return new t(n,i)},r.Line=function(t,i,e){return new n(t,i,e)},r.Pen=function(t){return new i(t)},i.prototype={constructor:{},setPoint:function(t){a(t)&&(this.point=t)},getPoint:function(){return this.point},setFillColor:function(t){this.fillStyle=t,this.context.fillStyle=this.fillStyle},getFillColor:function(){return this.fillStyle},setColor:function(t){this.strokeStyle=t,this.context.strokeStyle=this.strokeStyle},getColor:function(){return this.strokeStyle},setLineWidth:function(t){this.lineWidth=t,this.context.lineWidth=this.lineWidth},getLineWidth:function(){return this.lineWidth},setLineCap:function(t){this.lineCap=t,this.context.lineCap=this.lineCap},getLineCap:function(){return this.lineCap},setCenter:function(n){if(a(n)){this.context.translate(n.x,n.y);var n=new t({x:0,y:0});this.setPoint(n)}},setCoordinate:function(t){this.context.transform()},clean:function(t,n,i){if(a(t)&&u(n)&&u(i)){var e=this.context;e.clearRect(t.x,t.y,n,i)}}});f.drawCircle=function(t,n){var i=this.context;if(t=this.point,1==arguments.length&&u(arguments[0]))n=arguments[0];else{if(2!=arguments.length||!a(arguments[0])||!u(arguments[1]))return;t=arguments[0],n=arguments[1]}i.beginPath(),i.arc(t.x,t.y,n,0,2*Math.PI),i.stroke()},f.drawLine=function(i,e){if(1==arguments.length?arguments[0]instanceof t?(i=this.point,e=arguments[0]):arguments[0]instanceof n?(i=arguments[0].pointStart,e=arguments[0].pointEnd):l("drawline fail"):2==arguments.length?(i=arguments[0],e=arguments[1]):l("drawline fail"),a(i)&&a(e)){var o=this.context;o.beginPath(),o.moveTo(i.x,i.y),o.lineTo(e.x,e.y),o.stroke(),this.setPoint(e)}},f.drawRec=function(t,n){var i=arguments.length,e=this.context;if(1==i&&a(t))n=t,t=this.point;else{if(2!=i)return;if(a(t)&&a(n))t=t,n=n;else{if(u(t),!u(n))return;var o={};o.x=t,o.y=n,n=o,t=this.point}}e.strokeRect(t.x,t.y,n.x-t.x,n.y-t.y)},f.quadraticCurveTo=function(t,n,i){var e=this.context;e.beginPath(),e.moveTo(n.x,n.y),e.quadraticCurveTo(t.x,t.y,i.x,i.y),e.stroke()},f.bezierCurveTo=function(t,n,i,e){var o=this.context;o.beginPath(),o.moveTo(i.x,i.y),o.quadraticCurveTo(t.x,t.y,n.x,n.y,e.x,e.y),o.stroke()},f.drawImg=function(t){var n=this,i=new Image;i.src=t.src,t={src:t.src||"",cutStart:t.cutStart||{x:0,y:0},cutWidth:t.cutWidth||i.width,curHeight:t.curHeight||i.height,setStart:t.setStart||{x:0,y:0},imgWidth:t.imgWidth||i.width,imgHeight:t.imgHeight||i.height},console.log(i),i.onload=function(){console.log(i);var e=n.context;e.drawImage(i,t.cutStart.x,t.cutStart.y,t.cutWidth,t.curHeight,t.setStart.x,t.setStart.y,t.imgWidth,t.imgHeight),e.stroke(),e.restore()}},e.Yun=o}).call(this);